<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Nanotwitter by FrankYan93</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Nanotwitter</h1>
      <h2 class="project-tagline">a baby version of Twitter designed as a platform for experimentation with scaling issues</h2>
      <a href="https://github.com/FrankYan93/nanotwitter" class="btn">View on GitHub</a>
      <a href="https://github.com/FrankYan93/nanotwitter/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/FrankYan93/nanotwitter/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="nanotwitter--" class="anchor" href="#nanotwitter--" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>NanoTwitter  <a href="https://codeclimate.com/github/FrankYan93/nanotwitter"><img src="https://codeclimate.com/github/FrankYan93/nanotwitter/badges/gpa.svg" alt="Code Climate"></a>
</h1>

<p>NanoTwitter is a ruby app with basic function of twitter. You can follow other users, tweet, like tweets and so on.<br>
<a href="https://frankyan93.github.io/nanotwitter/">Portfolio</a></p>

<h1>
<a id="authors" class="anchor" href="#authors" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Authors</h1>

<ul>
<li><strong><a href="https://frankyan93.github.io/">Jiadong Yan</a></strong></li>
<li><strong><a href="https://github.com/Dragoncell">Jiaming Xu</a></strong></li>
<li><strong><a href="https://github.com/xyjiang94">Xinyi Jiang</a></strong></li>
</ul>

<h1>
<a id="summary-statement" class="anchor" href="#summary-statement" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Summary Statement</h1>

<p>This project is a web application with the basic function of twitter. A logged in user can tweet, follow and unfollow other users, like and unlike tweet. A user can see all the tweets of his/her followings in the timeline.</p>

<p>We provide RESTful apis, which send reponses in json. We also provide a <a href="https://github.com/xyjiang94/nT_client_library">client library</a> which send and process http request to our apis.</p>

<p>We optimize our application to handle large scalability problems. Techniques we used including cache, multiple threads, queue, seperate service.</p>

<h1>
<a id="technology-description" class="anchor" href="#technology-description" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Technology Description</h1>

<p>We build this web application step by step with frequent integration of code using <strong><em><a href="https://github.com/FrankYan93/nanotwitter">Github</a>, <a href="https://codeship.com">Codeship</a>, <a href="https://www.heroku.com">Heroku</a></em></strong>.<br>
1. Design the overall functionality and database(We use <strong><em><a href="https://www.postgresql.org/">PostgreSQL</a></em></strong>) schema.<br>
2. Build the simple skeleton of a <strong><em><a href="http://www.sinatrarb.com/">Sinatra</a></em></strong> application.<br>
3. Design APIs that have the fundamental interaction with our database.<br>
4. We use <strong><em><a href="https://rubygems.org/gems/sinatra-activerecord/versions/2.0.9">ActiveRecord</a></em></strong> to abstract database, which is a great tool implementing ORM(object-relation mapping).<br>
5. Build some mini-tests and create test interface.<br>
6. Create UI with <strong><em><a href="https://www.tutorialspoint.com/ruby/eruby.htm">erb</a></em></strong> (embedded ruby) and use <strong><em><a href="https://jquery.com/">JQuery</a></em></strong> to control some behavior of the website elements.<br>
7. Include some <strong><em><a href="https://en.wikipedia.org/wiki/Content_delivery_network">CDN</a></em></strong> to beautify the website, such as <strong><em><a href="http://getbootstrap.com/">Bootstrap</a></em></strong>.<br>
8. Using <strong><em><a href="https://redis.io/">Redis</a></em></strong>(a cache) to speed up the response by reducing direct database operations.<br>
9. Using <strong><em><a href="http://www.rabbitmq.com/tutorials/tutorial-one-ruby.html">RabbitMQ</a></em></strong>(queue, RPC) to communicate between different servers.  </p>

<h1>
<a id="interesting-engineering" class="anchor" href="#interesting-engineering" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Interesting Engineering</h1>

<ol>
<li>We can pop up the single tweet when you click on this tweet, which is implemented by <strong><em><a href="https://jquery.com/">JQuery</a></em></strong>.</li>
<li>We have another <strong><em><a href="http://www.sinatrarb.com/">Sinatra</a></em></strong> application running on <strong><em><a href="www.heroku.com">Heroku</a></em></strong> that works as a web service for notification.</li>
<li>We have a special function that the app will recommend some users may interest to current user realized by shuffle. <code>shuffle(arr, k)</code> is an interesting method that input an array and a number k. Then it will return k random elements without repetition.</li>
</ol>

<h1>
<a id="getting-started" class="anchor" href="#getting-started" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Getting Started</h1>

<p>Notification service repo: <a href="https://github.com/FrankYan93/nanoNotification">https://github.com/FrankYan93/nanoNotification</a><br>
We must visit <a href="https://nano-notification.herokuapp.com/start">https://nano-notification.herokuapp.com/start</a> to start our web service for notification.<br>
Main website: <a href="https://nano-twitter-dratini.herokuapp.com">https://nano-twitter-dratini.herokuapp.com</a><br>
You are welcome to sign up and have fun.</p>

<h2>
<a id="running-the-tests" class="anchor" href="#running-the-tests" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Running the tests</h2>

<p><strong>How to run tests</strong></p>

<pre><code>rake (run all minitests)
ruby test/testUser/testGet.rb
ruby test/testUser/testUserCreate.rb
ruby test/testUser/testFollowUnfollow.rb
ruby test/testUser/testEditProfile.rb
ruby test/testTweet/testTweetCreate.rb
</code></pre>

<h1>
<a id="screenshots" class="anchor" href="#screenshots" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Screenshots</h1>

<ul>
<li>
<strong><em>Click the awesome image to see our descriptive video.[If you are curious about our voice :) ]</em></strong>
<a href="https://www.youtube.com/watch?v=wBycBuGw380"><img src="https://pbs.twimg.com/media/CzMA40-UoAQVu5p.jpg:large" alt="nanoTwitter"></a>
</li>
</ul>

<h1>
<a id="built-with" class="anchor" href="#built-with" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Built with</h1>

<ul>
<li>Ruby</li>
<li>Sinatra</li>
<li>Activerecord</li>
<li>PostgreSQL</li>
<li>Javascript</li>
<li>JQuery</li>
<li>Bootstrap</li>
<li>Bootbox</li>
<li>Rake</li>
<li>Redis</li>
<li>RabbitMQ</li>
<li>Resque</li>
<li>Rack</li>
<li>...</li>
</ul>

<h1>
<a id="loader-test-results" class="anchor" href="#loader-test-results" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Loader Test Results</h1>

<ul>
<li>#### 0-1000 over 1 min with the root url not logged in

<ol>
<li>Max # of clients active:1000</li>
<li>What time stopped:1min</li>
<li>average response time (ms):2503</li>
<li>min/max response times:15/7151</li>
<li>Error Rate:0%</li>
<li>total successes (response counts):11137</li>
</ol>
</li>
<li>#### 0 - 500 in 1 min Logged In (Test 2) - User14, Verda

<ol>
<li>Max # of clients active:500</li>
<li>What time stopped:1min</li>
<li>average response time (ms):1987</li>
<li>min/max response times:12/4842</li>
<li>Error Rate:0%</li>
<li>total successes (response counts):6987</li>
</ol>
</li>
<li>#### Logged in Random Tweets (Test 3) 0-500clients over 1 min

<ol>
<li>Max # of clients active:500</li>
<li>What time stopped:1min</li>
<li>average response time (ms):3353</li>
<li>min/max response times:17/7750</li>
<li>Error Rate:0%</li>
<li>total successes (response counts):4011</li>
<li>random send tweet:"Hello,bonnie"</li>
</ol>
</li>
<li>#### All complete! Cheers!</li>
</ul>

<h1>
<a id="versioning" class="anchor" href="#versioning" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Versioning</h1>

<p>nT1.0</p>

<h1>
<a id="license" class="anchor" href="#license" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>License</h1>

<p>This project is licensed under MIT License</p>

<h1>
<a id="acknowledgments" class="anchor" href="#acknowledgments" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Acknowledgments</h1>

<p>Thanks for Professor <strong>Pito Salas</strong>'s great guide and help from teaching assistants <strong>Karishma Reddy Khan</strong> and <strong>Alex Suk</strong>.  </p>

<h1>
<a id="tips" class="anchor" href="#tips" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Tips</h1>

<ol>
<li>To run the test, conduct <code>rake db:test:prepare</code> and <code>rake db:test:load</code>
Then type <code>rake</code> in the terminal to run all the test</li>
<li>Reset database: <code>heroku pg:reset DATABASE_URL</code>
</li>
<li>We must flush all redis after test api used, and restart app.
run <code>heroku redis:cli</code>  <code>flushall</code>
</li>
<li><code>heroku run rake db:migrate</code></li>
<li>
<code>lsof -i :4567</code> to see which process is running in port 4567</li>
<li>
<a href="https://nano-notification.herokuapp.com/start">https://nano-notification.herokuapp.com/start</a> will start the rabbitmq notification service</li>
</ol>

<h1>
<a id="steps-in-local" class="anchor" href="#steps-in-local" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Steps in local:</h1>

<ol>
<li>git clone</li>
<li>install redis in local and run redis by <code>redis-server</code> links: <a href="http://download.redis.io/releases/redis-3.2.5.tar.gz">http://download.redis.io/releases/redis-3.2.5.tar.gz</a> follow readme to install redis first</li>
<li>install RabbitMQ server by <code>brew update</code>, <code>brew install rabbitmq</code>, should first install brew first. Run rabbitmq by <code>rabbitmq-server</code> if you have some problem to start, try <code>sudo chown $(whoami) /usr/local/share/man/man3</code> and <code>sudo chown $(whoami) /usr/local/share/man/man5</code>
</li>
<li>install all gems by <code>bundle install</code>
</li>
<li>install <a href="https://www.postgresql.org/">PostgreSQL</a> and open it</li>
<li>run <code>rake db:migrate</code>
</li>
<li>run <code>ruby app.rb</code> to start the service</li>
<li>open <code>0.0.0.0:4567</code> in the web browser</li>
<li>reset data using test api</li>
<li>done!</li>
</ol>

<h1>
<a id="last-modify-date" class="anchor" href="#last-modify-date" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Last Modify Date</h1>

<p>Dec 8, 2016</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/FrankYan93/nanotwitter">Nanotwitter</a> is maintained by <a href="https://github.com/FrankYan93">FrankYan93</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
